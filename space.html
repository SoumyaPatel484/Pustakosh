<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Space Invaders</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #ffe6f0, #e0f7fa);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: 'Comic Sans MS', 'Segoe UI', cursive, sans-serif;
        }
        .grid {
            width: 90vmin;
            height: 90vmin;
            max-width: 600px;
            max-height: 600px;
            display: flex;
            flex-wrap: wrap;
            border: 3px solid #ffb6c1;
            background-color: #fffdfd;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border-radius: 24px;
            overflow: hidden;
            position: relative;
        }
        .grid div {
            width: calc(100% / 15);
            height: calc(100% / 15);
            transition: all 0.2s ease;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .invader::before { content: "üëæ"; font-size: 1.8rem; }
        .shooter::before { content: "üèπ"; font-size: 1.8rem; }
        .laser::before { content: "‚ö°"; font-size: 1.4rem; color: #ff9900; }
        .boom::before { content: "üí•"; font-size: 2rem; }
    </style>
</head>
<body>
    <h1 class="results">Result: 0</h1>
    <div class="grid"></div>
    <script>
        const grid = document.querySelector(".grid");
        const resultDisplay = document.querySelector(".results");
        let currentShooterIndex = 202;
        const width = 15;
        const aliensRemoved = [];
        let invadersId;
        let isGoingRight = true;
        let direction = 1;
        let results = 0;
        
        for (let i = 0; i < width * width; i++) {
            const square = document.createElement("div");
            grid.appendChild(square);
        }
        
        const squares = Array.from(document.querySelectorAll(".grid div"));
        
        const alienInvaders = [
            0, 1, 2, 3, 4, 5, 6, 7, 8, 9,
            15, 16, 17, 18, 19, 20, 21, 22, 23, 24,
            30, 31, 32, 33, 34, 35, 36, 37, 38, 39
        ];
        
        function draw() {
            alienInvaders.forEach((inv, i) => {
                if (!aliensRemoved.includes(i)) squares[inv].classList.add("invader");
            });
        }
        draw();
        squares[currentShooterIndex].classList.add("shooter");
        
        function remove() {
            alienInvaders.forEach(inv => squares[inv].classList.remove("invader"));
        }
        
        function moveShooter(e) {
            squares[currentShooterIndex].classList.remove("shooter");
            if (e.key === "ArrowLeft" && currentShooterIndex % width !== 0) currentShooterIndex -= 1;
            if (e.key === "ArrowRight" && currentShooterIndex % width < width - 1) currentShooterIndex += 1;
            squares[currentShooterIndex].classList.add("shooter");
        }
        document.addEventListener("keydown", moveShooter);
        
        function moveInvaders() {
            const leftEdge = alienInvaders[0] % width === 0;
            const rightEdge = alienInvaders[alienInvaders.length - 1] % width === width - 1;
            remove();
            
            if (rightEdge && isGoingRight) {
                alienInvaders.forEach((_, i) => alienInvaders[i] += width + 1);
                direction = -1;
                isGoingRight = false;
            }
            
            if (leftEdge && !isGoingRight) {
                alienInvaders.forEach((_, i) => alienInvaders[i] += width - 1);
                direction = 1;
                isGoingRight = true;
            }
            
            alienInvaders.forEach((_, i) => alienInvaders[i] += direction);
            draw();
            
            if (squares[currentShooterIndex].classList.contains("invader")) {
                resultDisplay.innerHTML = "GAME OVER";
                clearInterval(invadersId);
            }
            
            if (aliensRemoved.length === alienInvaders.length) {
                resultDisplay.innerHTML = "YOU WIN";
                clearInterval(invadersId);
            }
        }
        invadersId = setInterval(moveInvaders, 600);
        
        function shoot(e) {
            if (e.key !== "ArrowUp") return;
            let laserId;
            let currentLaserIndex = currentShooterIndex;
            
            function moveLaser() {
                squares[currentLaserIndex].classList.remove("laser");
                currentLaserIndex -= width;
                squares[currentLaserIndex].classList.add("laser");
                
                if (squares[currentLaserIndex].classList.contains("invader")) {
                    squares[currentLaserIndex].classList.remove("laser", "invader");
                    squares[currentLaserIndex].classList.add("boom");
                    setTimeout(() => squares[currentLaserIndex].classList.remove("boom"), 300);
                    clearInterval(laserId);
                    
                    const alienRemoved = alienInvaders.indexOf(currentLaserIndex);
                    aliensRemoved.push(alienRemoved);
                    results++;
                    resultDisplay.innerHTML = results;
                }
            }
            laserId = setInterval(moveLaser, 100);
        }
        document.addEventListener('keydown', shoot);
    </script>
</body>
</html>
